<%
  @hide_layout_errors = true

  translate_error(code: :no_users) do
    gave_an_email = params["login"]["username_or_email"].match(/@/)
    gave_an_email ? t(:'.unknown_email') : t(:'.unknown_username')
  end

  translate_error(code: :multiple_users) do
    t(:".multiple_users.content_html",
      link: (link_to (t :".multiple_users.click_here"),
                     email_usernames_path,
                     method: :post,
                     remote: true))
  end
%>


<div class="ox-card login">

  <h1 class="title"><%= t '.page_heading' %></h1>

  <%= lev_form_for :login, url: lookup_login_path,
      html: {class: collect_errors.any? ? 'is-invalid' : ''} do |f| %>

      <% fh = FormHelper::One.new(f: f,
         context: self, errors: @handler_result.try(:errors)) %>

      <section>
        <%= fh.text_field name: :username_or_email,
            label: '.email_placeholder' %>
        <%= render(partial: "layouts/attention") %>
      </section>


      <section class="footer">
        <input type="submit" value="<%= t '.next' %>" class="primary" />
        <p class="extra-info">
          <%= t '.no_account_q' %>
          <%= link_to(t('.sign_up'), signup_password_path) %>.
        </p>
      </section>
  <% end %>

</div>
